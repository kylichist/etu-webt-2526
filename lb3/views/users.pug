doctype html
html
    head
        title Users
        meta(charset="utf-8")
        meta(name="viewport" content="width=device-width, initial-scale=1")
        link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css")
        link(rel="stylesheet" href="/static/styles/main.css")
    body
        nav.navbar.navbar-expand-lg.navbar-dark.bg-primary
            .container-fluid
                a.navbar-brand(href="/") Social Admin
                button.navbar-toggler(type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="nav" aria-expanded="false")
                    span.navbar-toggler-icon
                #nav.collapse.navbar-collapse
                    ul.navbar-nav.me-auto.mb-2.mb-lg-0
                        li.nav-item: a.nav-link(href="/users") Users
                        li.nav-item: a.nav-link(href="/news") News

        .container.mt-4
            .d-flex.justify-content-between.align-items-center.mb-3
                h2.mb-0 Users
                .d-flex.align-items-center.gap-2
                    input.form-control(type="search" id="users-search" placeholder="Search name or email")
                    button.btn.btn-success#btn-new(type="button") New user
            p.text-danger#users-error
            .card
                .card-body.p-0
                    table.table.table-hover.mb-0
                        thead.bg-light
                            tr
                                th Photo
                                th ФИО
                                th Birth Date
                                th Email
                                th Role
                                th Status
                                th.text-end Actions
                        tbody#users-table

        // modal (unchanged, but add avatar preview area)
        .modal.fade#userModal(tabindex="-1" aria-hidden="true")
            .modal-dialog
                .modal-content
                    .modal-header
                        h5.modal-title#modalTitle New user
                        button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
                    .modal-body
                        form#user-form.novalidate
                            input(type="hidden" id="uid")
                            .mb-2
                                label.form-label(for="firstName") First name
                                input.form-control(type="text" id="firstName" placeholder="First name")
                            .mb-2
                                label.form-label(for="lastName") Last name
                                input.form-control(type="text" id="lastName" placeholder="Last name")
                            .mb-2
                                label.form-label(for="birthDate") Birth date
                                input.form-control(type="date" id="birthDate")
                            .mb-2
                                label.form-label(for="email") Email
                                input.form-control(type="email" id="email" placeholder="name@example.com")
                            .mb-2
                                label.form-label(for="photo") Photo URL (or upload below)
                                input.form-control(type="text" id="photo" placeholder="/static/img/user1.jpg")
                            .mb-2
                                label.form-label(for="avatarFile") Upload avatar image (jpg, png, webp, gif)
                                input.form-control(type="file" id="avatarFile" accept="image/*")
                                // preview
                                .mt-2
                                    img#avatarPreview(src="/static/img/default.jpg" class="avatar" style="display:none;")
                            .mb-2
                                .row
                                    .col
                                        label.form-label(for="role") Role
                                        select.form-select(id="role")
                                            option(value="user") user
                                            option(value="admin") admin
                                    .col
                                        label.form-label(for="status") Status
                                        select.form-select(id="status")
                                            option(value="unverified") unverified
                                            option(value="active") active
                                            option(value="blocked") blocked
                    .modal-footer
                        button.btn.btn-danger#btn-delete(type="button" style="display:none") Delete
                        button.btn.btn-secondary(type="button" data-bs-dismiss="modal") Close
                        button.btn.btn-primary#btn-save(type="button") Save

        .position-fixed(bottom="1rem" end="1rem" style="z-index:1060")
            .toast-container#toastContainer

        script(src="https://cdn.jsdelivr.net/npm/axios@1.4.0/dist/axios.min.js")
        script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js")
        script(src="/static/js/users.js")
